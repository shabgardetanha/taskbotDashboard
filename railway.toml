[build]
builder = "NIXPACKS"
buildCommand = "npm ci && npm run build"

[deploy]
startCommand = "npm start"

# Node.js 20 (حتماً این خط باشه)
[phases.setup]
nixpkgsArchive = "f7e7f32b937f54e9c5e9d6f948f3e4f5f8c356a6"  # این معادل Node 20 هست

# اگر Prisma داری (اختیاری)
[[build.hooks]]
command = "npx prisma generate"